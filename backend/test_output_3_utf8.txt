node.exe : npm warn 
Unknown cli config 
"--colors". This 
will stop working in 
the next major 
version of npm.
At line:1 char:1
+ & "C:\Program Files
\nodejs/node.exe" 
"C:\Program 
Files\nodejs/node_mo 
...
+ ~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~
    + CategoryInfo   
           : NotSpe  
  cified: (npm war   
 n Unknow...versi    
on of npm.:Strin    
g) [], RemoteExc    
eption
    + FullyQualified 
   ErrorId : Native  
  CommandError
 

> fitness-backend@1.0.0 test
> jest src/tests/auth.test.ts

  console.error
    { code: '23505' }

    [0m [90m 61 |[39m         res[33m.[39mjson({ user[33m,[39m token })[33m;[39m
     [90m 62 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 63 |[39m         console[33m.[39merror(error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 64 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Internal Server Error'[39m })[33m;[39m
     [90m 65 |[39m     }
     [90m 66 |[39m }[33m;[39m[0m

      at login (src/controllers/auth.controller.ts:63:17)

FAIL src/tests/auth.t
est.ts
  Auth Controller - 
Suite B
    ÔêÜ should 
register a new user 
with valid data (38 
ms)
    ÔêÜ should login 
a user with valid 
credentials (1 ms)
  Auth API 
Integration Tests 
(Mocked DB)
    ÔêÜ POST /signup 
- success (8 ms)
    ÔêÜ POST /signup 
- fails with empty 
fields (7 ms)
    ÔêÜ POST /signup 
- fails with invalid 
email (14 ms)
    ÔêÜ POST /signup 
- fails with short 
password (6 ms)
    ├ù POST /signup 
- handles duplicate 
user (8 ms)
    ├ù POST /login - 
success (20 ms)
    ÔêÜ POST /login 
- fails with wrong 
password (13 ms)
    ├ù POST /login - 
fails if user not 
found (16 ms)
    ÔêÜ POST /login 
- prevents SQL 
injection via 
parameterization (11 
ms)
    ÔêÜ POST /signup 
- validates email 
format strictly (9 
ms)
    ÔêÜ POST /signup 
- fails if username 
is too short (14 ms)
    ÔêÜ Login 
returns user info 
without password 
hash (7 ms)
    ÔêÜ generates 
token with 7d expiry 
(16 ms)

  ÔùÅ Auth API 
Integration Tests 
(Mocked DB) ÔÇ║ POST 
/signup - handles 
duplicate user

    expect(received).
toBe(expected) // 
Object.is equality

    Expected: 409
    Received: 201

    [0m [90m 120 
|[39m             
password[33m:[39m 
[32m'password123'[39
m
     [90m 121 
|[39m         
})[33m;[39m
    [31m[1m>[22m[
39m[90m 122 |[39m  
       expect(res[33
m.[39mstatus)[33m.
[39mtoBe([35m409[39
m)[33m;[39m 
[90m// Conflict[39m
     [90m     
|[39m               
             
[31m[1m^[22m[39m
     [90m 123 
|[39m         expect
(res[33m.[39mbody[
33m.[39merror)[33m.
[39mtoMatch([35m/ex
ists/[39m)[33m;[39
m
     [90m 124 
|[39m     
})[33m;[39m
     [90m 125 
|[39m[0m

      at 
Object.<anonymous> (s
rc/tests/auth.test.ts
:122:28)

  ÔùÅ Auth API 
Integration Tests 
(Mocked DB) ÔÇ║ POST 
/login - success

    expect(received).
toBe(expected) // 
Object.is equality

    Expected: 200
    Received: 500

    [0m [90m 131 
|[39m             
password[33m:[39m 
[32m'password123'[39
m
     [90m 132 
|[39m         
})[33m;[39m
    [31m[1m>[22m[
39m[90m 133 |[39m  
       expect(res[33
m.[39mstatus)[33m.
[39mtoBe([35m200[39
m)[33m;[39m
     [90m     
|[39m               
             
[31m[1m^[22m[39m
     [90m 134 
|[39m         expect
(res[33m.[39mbody[
33m.[39mtoken)[33m.
[39mtoBeDefined()[3
3m;[39m
     [90m 135 
|[39m     
})[33m;[39m
     [90m 136 
|[39m[0m

      at 
Object.<anonymous> (s
rc/tests/auth.test.ts
:133:28)

  ÔùÅ Auth API 
Integration Tests 
(Mocked DB) ÔÇ║ POST 
/login - fails if 
user not found

    expect(received).
toBe(expected) // 
Object.is equality

    Expected: 401
    Received: 200

    [0m [90m 154 
|[39m             
password[33m:[39m 
[32m'password123'[39
m
     [90m 155 
|[39m         
})[33m;[39m
    [31m[1m>[22m[
39m[90m 156 |[39m  
       expect(res[33
m.[39mstatus)[33m.
[39mtoBe([35m401[39
m)[33m;[39m
     [90m     
|[39m               
             
[31m[1m^[22m[39m
     [90m 157 
|[39m     
})[33m;[39m
     [90m 158 |[39m
     [90m 159 
|[39m     [90m// 
Security: SQL 
Injection 
Sanitization[39m[0m

      at 
Object.<anonymous> (s
rc/tests/auth.test.ts
:156:28)

Test Suites: 1 
failed, 1 total
Tests:       3 
failed, 12 passed, 
15 total
Snapshots:   0 total
Time:        2.107 s
Ran all test suites 
matching /src\\tests\
\auth.test.ts/i.

Jest has detected 
the following 1 open 
handle potentially 
keeping Jest from 
exiting:

  ÔùÅ  TCPWRAP

    [0m [90m 4 
|[39m
     [90m 5 |[39m 
[36mconst[39m 
redis [33m=[39m 
createClient({ 
url[33m:[39m proces
s[33m.[39menv[33m.
[39m[33mREDIS_URL[
39m })[33m;[39m
    [31m[1m>[22m[
39m[90m 6 |[39m red
is[33m.[39mconnect(
)[33m.[39m[36mcatc
h[39m(console[33m.
[39merror)[33m;[39m
     [90m   |[39m  
     
[31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m 
[36mexport[39m 
[36mconst[39m 
createMatch 
[33m=[39m 
[36masync[39m 
(req[33m:[39m 
any[33m,[39m 
res[33m:[39m 
[33mResponse[39m) 
[33m=>[39m {
     [90m 9 |[39m  
   [36mtry[39m 
{[0m

      at RedisSocket.
_RedisSocket_createNe
tSocket (node_modules
/@redis/client/dist/l
ib/client/socket.js:2
08:21)
      at node_modules
/@redis/client/dist/l
ib/client/socket.js:1
75:101
      at RedisSocket.
_RedisSocket_createSo
cket (node_modules/@r
edis/client/dist/lib/
client/socket.js:172:
12)
      at RedisSocket.
_RedisSocket_connect 
(node_modules/@redis/
client/dist/lib/clien
t/socket.js:147:154)
      at 
RedisSocket.connect (
node_modules/@redis/c
lient/dist/lib/client
/socket.js:51:96)
      at 
Commander.connect (no
de_modules/@redis/cli
ent/dist/lib/client/i
ndex.js:185:70)
      at 
Object.<anonymous> (s
rc/controllers/match.
controller.ts:6:7)
      at 
Object.<anonymous> (s
rc/routes/index.ts:4:
1)
      at 
Object.<anonymous> 
(src/app.ts:6:1)
      at 
Object.<anonymous> (s
rc/tests/auth.test.ts
:2:1)

